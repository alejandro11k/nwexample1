<!DOCTYPE html>
<html>
<head>
  <title>Context Menu</title>
</head>
<body style="width: 100%; height: 100%;">

<p>'Right click' to show context menu.</p>

<script>
// Create an empty context menu
var menu = new nw.Menu();

// Add some items with label
menu.append(new nw.MenuItem({
  label: 'Item A',
  click: function(){
    alert('You have clicked at "Item A"');
  }
}));
menu.append(new nw.MenuItem({ label: 'Item B' }));
menu.append(new nw.MenuItem({ type: 'separator' }));
menu.append(new nw.MenuItem({ label: 'Item C' }));

// Hooks the "contextmenu" event
document.body.addEventListener('contextmenu', function(ev) {
  // Prevent showing default context menu
  ev.preventDefault();
  // Popup the native context menu at place you click
  menu.popup(ev.x, ev.y);

  return false;
}, false);

// get the system platform using node.js
var os = require('os');
document.write('You are running on ', os.platform());

//
var request = require('then-request');
var r;
/*
//si le tire frula rompe o no conection
request('GET', 'http://camba.coop').done(function (res) {
  //console.log(res.getBody());
  console.log(res.statusCode);
  //console.log(getBody(res));
  r = res;
});
*/

// CDM-444
var urlExists = require('url-exists');
var e1,e2;

urlExists('https://www.google.com', function(err, exists) {
  console.log(exists); // true
  e1 = exists;
});

urlExists('https://www.fakeurl.notreal', function(err, exists) {
  console.log(exists); // false
  e2 = exists;
});

document.write(' statusCode ', r ,' ' , e1 , ' ' , e2);

function getBody(encoding) {
  if (this.statusCode >= 300) {
    var err = new Error('Server responded with status code ' + this.statusCode + ':\n' + this.body.toString(encoding));
    err.statusCode = this.statusCode;
    err.headers = this.headers;
    err.body = this.body;
    throw err;
  }
  return encoding ? this.body.toString(encoding) : this.body;
}

</script>
</body>
</html>
